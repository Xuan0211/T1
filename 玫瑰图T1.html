<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
    <script src="d3.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>
        <script>
            var bkImg = new Image();
            bkImg.src="背景.jpg"
            function Hide(all)
            {
                document.getElementById("welcom").style.display='none';
                var ui =document.getElementsByClassName("Echart");
                for (var i=0;i<all;i++)
                {
                    ui[i].style.display='none';
                }
            }
            function LiBai()
            {
                var pieImg = new Image();
                pieImg.src="李白.jpg";
                Hide(2);
                document.getElementById('李白').style.display='block';
                d3.csv("venv/李白.csv",function (LiBai)
                {
                    console.log(LiBai)

                    var app = {};

                    var chartDom = document.getElementById('李白');
                    var myChart = echarts.init(chartDom);
                    var option;

                    option = {
                        backgroundColor: {
                            image: bkImg,
                            repeat: 'repeat'
                        },

                        tooltip: {},
                        series: [
                            {
                                name: '李白',
                                type: 'pie',
                                selectedMode: 'single',
                                selectedOffset: 30,
                                clockwise: true,
                                label: {
                                    fontSize: 30,
                                    fontFamily:"叶根友行书繁",
                                    fontWeight:"bold",
                                    color: '#ffffff'//#7d0000
                                },
                                labelLine: {
                                    lineStyle: {
                                        color: '#693b00'
                                    }
                                },
                                data:LiBai,
                                itemStyle: {
                                    opacity: 0.7,
                                    color: {
                                        image: pieImg,
                                        repeat: 'repeat'
                                    },
                                    borderWidth: 3,
                                    borderColor: '#693b00'
                                }
                            }
                        ]
                    };
                    option && myChart.setOption(option);

                })
            }
            function DuFU()
            {
                Hide(2);
                var pieImg = new Image();
                pieImg.src="杜甫.jpg";
                document.getElementById('杜甫').style.display='block';
                d3.csv("venv/杜甫.csv",function (DuFu)
                {
                    console.log(DuFu)

                    var app = {};

                    var chartDom = document.getElementById('杜甫');
                    var myChart = echarts.init(chartDom);
                    var option;

                    option = {

                        backgroundColor: {
                            image: bkImg,
                            repeat: 'repeat'
                        },

                        tooltip: {},
                        series: [
                            {
                                name: '杜甫',
                                type: 'pie',
                                selectedMode: 'single',
                                selectedOffset: 30,
                                clockwise: true,
                                label: {
                                    fontSize: 30,
                                    fontFamily:"叶根友行书繁",
                                    fontWeight:"bold",
                                    color: '#ffffff'//#7d0000
                                },
                                labelLine: {
                                    lineStyle: {
                                        color: '#693b00'
                                    }
                                },
                                data:DuFu,
                                itemStyle: {
                                    opacity: 0.7,
                                    color: {
                                        image: pieImg,
                                        repeat: 'repeat'
                                    },
                                    borderWidth: 3,
                                    borderColor: '#693b00'
                                }
                            }
                        ]
                    };
                    option && myChart.setOption(option);


                })
            }
        </script>
        <button type="button"
                onclick="LiBai()"
        >
            李白
        </button>
        <button onclick="DuFU()">
            杜甫
        </button>
    </div>
    <div class="Echart" id="李白" style="width: 800px; height: 600px; display:none"></div>
    <div class="Echart" id="杜甫" style="width: 800px; height: 600px; display:none"></div>
    <div id="welcom" style="width: 800px; height: 600px">
        <h1>诗人用词偏好</h1>
    </div>
</body>
</html>